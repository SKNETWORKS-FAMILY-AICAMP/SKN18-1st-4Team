# 기아자동차 FAQ 크롤링 프로젝트 PRD (Product Requirements Document)

## 🎯 프로젝트 개요

### 프로젝트명
기아자동차 FAQ 자동 수집 시스템

### 목적
기아자동차 공식 FAQ 페이지에서 카테고리별 질문과 답변을 자동으로 수집하여 구조화된 데이터로 제공

### 대상 웹사이트
- **URL**: https://www.kia.com/kr/customer-service/center/faq
- **언어**: 한국어
- **브랜드**: 기아자동차

## 📋 핵심 요구사항

### 1. 기능적 요구사항 (Functional Requirements)

#### 1.1 카테고리 기반 데이터 수집
- **FR-001**: 큰 카테고리 선택 시 해당 카테고리의 모든 질문과 답변 수집
- **FR-002**: 카테고리별로 데이터를 분류하여 저장
- **FR-003**: 각 카테고리 내 질문-답변 쌍을 정확히 매칭

#### 1.2 데이터 구조화
- **FR-004**: 수집된 데이터를 CSV 및 JSON 형태로 저장
- **FR-005**: 카테고리별 통계 정보 제공
- **FR-006**: 중복 데이터 제거 및 데이터 정제

### 2. 기술적 요구사항 (Technical Requirements)

#### 2.1 웹 스크래핑 기술
- **TR-001**: Playwright 패키지 사용 (필수)
- **TR-002**: 헤드리스 브라우저 모드 지원
- **TR-003**: 동적 콘텐츠 로딩 대기 처리

#### 2.2 셀렉터 및 데이터 추출
- **TR-004**: 카테고리명 추출: `span.name` 셀렉터 사용
- **TR-005**: 질문 제목 추출: `span.cmp-accordion__title` 셀렉터 사용
- **TR-006**: 답변 내용 추출: `div[id^="container-"] > div > p:first-of-type` 셀렉터 사용   ######

#### 2.3 성능 요구사항
- **TR-007**: 페이지 로딩 대기 시간 최적화
- **TR-008**: 메모리 사용량 최적화
- **TR-009**: 네트워크 타임아웃 설정

### 3. 비기능적 요구사항 (Non-Functional Requirements)

#### 3.1 안정성
- **NFR-001**: 네트워크 오류 시 재시도 메커니즘
- **NFR-002**: 웹사이트 구조 변경 시 적응 가능한 설계
- **NFR-003**: 부분 실패 시에도 수집된 데이터 보존

#### 3.2 확장성
- **NFR-004**: 새로운 카테고리 추가 시 쉽게 확장 가능
- **NFR-005**: 다른 자동차 브랜드로 확장 가능한 구조

#### 3.3 유지보수성
- **NFR-006**: 모듈화된 코드 구조
- **NFR-007**: 상세한 로깅 및 문서화
- **NFR-008**: 설정 파일을 통한 셀렉터 관리

## 🏗️ 시스템 아키텍처

### 1. 전체 구조
```
기아자동차 FAQ 크롤러
├── 웹 페이지 접근 (Playwright)
├── 카테고리 탐색 (span.name)
├── 질문 목록 수집 (span.cmp-accordion__title)
├── 답변 내용 추출
├── 데이터 정제 및 구조화
└── 파일 저장 (CSV/JSON)
```

### 2. 핵심 컴포넌트

#### 2.1 KiaFAQCrawler 클래스
- **역할**: 메인 크롤링 로직 담당
- **주요 메서드**:
  - `setup_browser()`: Playwright 브라우저 설정
  - `get_categories()`: 카테고리 목록 수집
  - `get_faqs_by_category()`: 카테고리별 FAQ 수집
  - `extract_qa_pairs()`: 질문-답변 쌍 추출
  - `save_data()`: 데이터 저장

#### 2.2 DataProcessor 클래스
- **역할**: 데이터 정제 및 구조화
- **주요 메서드**:
  - `clean_text()`: 텍스트 정제
  - `remove_duplicates()`: 중복 제거
  - `categorize_data()`: 카테고리 분류

#### 2.3 FileManager 클래스
- **역할**: 파일 저장 및 관리
- **주요 메서드**:
  - `save_to_csv()`: CSV 파일 저장
  - `save_to_json()`: JSON 파일 저장
  - `generate_report()`: 통계 리포트 생성

## 📊 데이터 모델

### 1. FAQ 데이터 구조
```json
{
  "category": "카테고리명",
  "question": "질문 내용",
  "answer": "답변 내용",
  "category_id": "카테고리 ID",
  "question_id": "질문 ID",
  "created_at": "수집 시간"
}
```

### 2. 카테고리 데이터 구조
```json
{
  "category_id": "카테고리 ID",
  "category_name": "카테고리명",
  "faq_count": "FAQ 개수",
  "url": "카테고리 URL"
}
```

## 🔧 기술 스택

### 1. 핵심 기술
- **Python 3.8+**: 메인 프로그래밍 언어
- **Playwright**: 웹 브라우저 자동화
- **Pandas**: 데이터 처리 및 CSV 저장
- **JSON**: 데이터 직렬화

### 2. 추가 라이브러리
- **BeautifulSoup**: HTML 파싱 (필요시)
- **Requests**: HTTP 요청 (필요시)
- **Logging**: 로그 관리
- **ConfigParser**: 설정 파일 관리

## 📁 프로젝트 구조

```
kia_faq_crawler/
├── src/
│   ├── __init__.py
│   ├── crawler.py          # 메인 크롤러 클래스
│   ├── data_processor.py   # 데이터 처리 클래스
│   ├── file_manager.py     # 파일 관리 클래스
│   └── utils.py           # 유틸리티 함수
├── config/
│   └── settings.py        # 설정 파일
├── data/
│   ├── raw/               # 원시 데이터
│   ├── processed/         # 처리된 데이터
│   └── reports/           # 리포트 파일
├── logs/                  # 로그 파일
├── tests/                 # 테스트 코드
├── requirements.txt       # 의존성 패키지
├── main.py               # 실행 파일
└── README.md             # 프로젝트 문서
```

## 📅 구현 계획

### Phase 1: 기본 구조 및 환경 설정 (1-2일)
- [ ] 프로젝트 디렉토리 구조 생성
- [ ] Playwright 환경 설정
- [ ] 기본 클래스 구조 설계
- [ ] 설정 파일 작성

### Phase 2: 핵심 크롤링 로직 구현 (2-3일)
- [ ] 웹페이지 접근 및 카테고리 탐색
- [ ] 질문 목록 수집 로직
- [ ] 답변 내용 추출 로직
- [ ] 데이터 매칭 및 구조화

### Phase 3: 데이터 처리 및 저장 (1-2일)
- [ ] 데이터 정제 로직
- [ ] CSV/JSON 저장 기능
- [ ] 중복 제거 및 검증
- [ ] 통계 리포트 생성

### Phase 4: 테스트 및 최적화 (1-2일)
- [ ] 단위 테스트 작성
- [ ] 통합 테스트 수행
- [ ] 성능 최적화
- [ ] 에러 처리 강화

### Phase 5: 문서화 및 배포 (1일)
- [ ] README 문서 작성
- [ ] 사용법 가이드 작성
- [ ] 코드 주석 추가
- [ ] 최종 검증

## ⚠️ 위험 요소 및 대응 방안

### 1. 기술적 위험
- **위험**: 웹사이트 구조 변경
- **대응**: 셀렉터를 설정 파일로 분리하여 유연성 확보

- **위험**: 동적 콘텐츠 로딩 실패
- **대응**: 적절한 대기 시간 및 재시도 로직 구현

### 2. 법적 위험
- **위험**: 웹사이트 이용약관 위반
- **대응**: 적절한 딜레이 설정 및 robots.txt 준수

### 3. 성능 위험
- **위험**: 대용량 데이터 처리 시 메모리 부족
- **대응**: 배치 처리 및 스트리밍 방식 적용

## 📈 성공 지표

### 1. 기능적 성공 지표
- [ ] 모든 카테고리에서 FAQ 데이터 수집 성공
- [ ] 질문-답변 쌍 정확도 95% 이상
- [ ] 데이터 중복률 5% 이하

### 2. 기술적 성공 지표
- [ ] 크롤링 성공률 90% 이상
- [ ] 평균 실행 시간 10분 이하
- [ ] 메모리 사용량 1GB 이하

### 3. 사용자 경험 지표
- [ ] 명령어 실행 후 30초 내 결과 확인 가능
- [ ] 에러 발생 시 명확한 메시지 제공
- [ ] 진행 상황 실시간 표시

## 🔍 추가 고려사항

### 1. 확장 가능성
- 다른 자동차 브랜드로의 확장
- 실시간 모니터링 기능 추가
- 웹 인터페이스 개발

### 2. 유지보수성
- 정기적인 셀렉터 업데이트
- 로그 분석을 통한 성능 모니터링
- 자동화된 테스트 실행

### 3. 데이터 품질
- 정기적인 데이터 검증
- 수동 검토 프로세스
- 피드백 반영 시스템

## 📝 참고 자료

### 웹사이트 분석
- **기아자동차 FAQ**: https://www.kia.com/kr/customer-service/center/faq
- **주요 셀렉터**:
  - 카테고리: `span.name`
  - 질문: `span.cmp-accordion__title`
  - 답변: `div[id^="container-"] > div > p:first-of-type`

---

**문서 버전**: 1.0  
**작성일**: 2024년 7월 31일  
**작성자**: AI Assistant  
**검토자**: 개발팀  
**상태**: 초안 작성 완료 